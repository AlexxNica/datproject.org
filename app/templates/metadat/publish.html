<div class="app-page" data-spy="scroll" data-target=".breadcrumbs-nav">
  <div class="app-text-container">
    <h1>Publish</h1>

    <div class="breadcrumbs-nav">
      <ul class="breadcrumbs" role="tablist">
        <li>
          <a href="#preview" class="{{breadcrumbClass('preview')}} no-page">
            Preview <span class="fui-check"></span>
          </a>
        </li>
        <li>
          <a class="{{breadcrumbClass('authorize')}} no-page">
            Authorize <span class="fui-check"></span>
          </a>
        </li>
        <li>
          <a class="{{breadcrumbClass('submit')}} no-page">
            Submit <span class="fui-check"></span>
          </a>
        </li>
      </ul>
    </div>

    <div class="form-horizontal breadcrumbs-content" role="form">
      <p class="publish-intro-text">
        {{state.introText}}
      </p>

      {{#if state.name == 'finish'}}

      <div id="finish">
        <a href="/view/{{metadat.id}}">Redirecting...</a>
      </div>

      {{else}}

      <div id="submit" class="{{state.name == 'submit' ? 'visible' : 'hidden'}}">
        <div class="form-group">
          <label for="inputName" class="col-sm-2 control-label">Name</label>
          <div class="col-sm-8">
            <input type="text" class="form-control" id="inputName"
              value="{{metadat.name}}"  />
          </div>
        </div>

        <div class="form-group">
          <label for="inputDescription" class="col-sm-2 control-label">Description</label>
          <div class="col-sm-8">
            <textarea class="form-control" id="inputDescription"
              value="{{metadat.description}}"></textarea>
          </div>
          <div class="col-sm-2">
            <button type="submit" on-click="publish"
              class="btn {{loading ? 'btn-disabled' : 'btn-success'}}">
               {{ loading ? 'Loading' : 'Publish' }}
            </button>
          </div>
        </div>

      <hr class="form-divider">
      </div>

      <div id="authorize" class="{{state.name == 'authorize'  ? 'visible' : 'hidden'}}">
        <div class="form-group {{authorizeError ? 'has-error' : ''}}">
          <label for="inputHandle" class="col-sm-2 control-label">Username</label>
          <div class="col-sm-8">
            <input type="text" class="form-control" id="inputHandle"
              placeholder="Enter your username..." value="{{adminUsername}}" />
          </div>
        </div>

        <div class="form-group {{authorizeError ? 'has-error' : ''}}">
          <label for="inputPass" class="col-sm-2 control-label">Password</label>
          <div class="col-sm-8">
            <input type="password" class="form-control" id="inputPass"
              placeholder="Enter your password..."  value="{{adminPassword}}" />
            <p class="help-block">
              <a href="/docs#password" target="_blank">Did you forget? It's ok.</a>
            </p>
          </div>
          <div class="col-sm-2">
            <button type="submit" on-click="authorizeSubmit"
               class="btn {{loading ? 'btn-disabled' : 'btn-success'}}">
               {{ loading ? 'Loading' : 'Submit' }}
            </button>
          </div>
        </div>
      <hr class="form-divider">
      </div>

      <div id="preview">
        <div class="form-group {{urlError ? 'has-error' : ''}}">

          <label for="metadatURL" class="col-sm-2 control-label">URL</label>
          <div class="col-sm-8">

            <input type="text" class="form-control" id="metadatURL"
              placeholder="http://" value="{{metadat.url}}" />

            <p class="{{ state.name != 'begin' ? 'hidden' : ''}} help-block">Don't have one?
              <a href="/docs#begin">Don't worry, it just takes a minute.</a>
            </p>

          </div>

          {{#if state.name == 'preview'}}
          <div class="col-sm-2">
            <button type="submit" on-click="previewOK"
               class="btn btn-success">Yes</button>
          </div>
          {{/if}}
        </div>

        {{#if metadat.json}}
        <div class="preview-frame">

            <iframe src="{{metadat.url}}"></iframe>
            <div class="json"><pre class="col-sm-12">{{prettyJSON(metadat.json)}}</pre></div>

        </div>
        {{/if}}

      </div>
    </div>
    {{/if}}
  </div>
</div>
